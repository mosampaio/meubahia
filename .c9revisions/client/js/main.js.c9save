{"ts":1356700101600,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"function parseRSS(url, callback) {\n\t$.ajax({\n\t\turl: 'http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=' + encodeURIComponent(url),\n\t\tdataType: 'json',\n\t\tsuccess: function(data) {\n\t\t  callback(data.responseData.feed);\n\t\t}\n    });\n}\nfunction loadNews() {\n\tvar urls = [\n\t'http://globoesporte.globo.com/servico/semantica/editorias/plantao/futebol/times/bahia/feed.rss'\n\t]\n\t$.each(urls, function(index, url) { \n\t\tparseRSS(url, function(data){\n\t\t\taddParagraphs(data.link, data.entries.slice(0,10), '.news');\n\t\t});\n\t});\n}\nfunction loadTwitter() {\n\t$.getJSON(document.location.protocol + '//' + document.location.hostname + ':' + document.location.port + '/tweets/', \n\t\tfunction(data) { \n\t\t\t$.each(data, function(index, value) { \n\t\t\t\t$('<p><a target=\"_blank\" href=\"http://twitter.com/'+value.from_user+'\" title=\"'+value.from_user_name+'\"\">@'+value.from_user+'</a> '+linkify_text(value)+'</p><hr/>').appendTo('.twitter');\n\t\t\t});\n\t\t}\n\t);\n}\nfunction loadBlogs() {\n\tvar urls = [\n\t\t'http://www.bbmp.com.br/?feed=rss2', \n\t\t'http://globoesporte.globo.com/platb/ba-torcedor-bahia/feed/',\n\t\t'http://www.semprebahia.com/feed/atom/',\n\t\t'http://feeds.feedburner.com/bahiaco'\n\t];\n\t$.each(urls, function(index, url) { \n\t\tparseRSS(url, function(data){\n\t\t\taddParagraphs(data.link, data.entries.slice(0,2), '.blogs');\n\t\t});\n\t});\n}\nfunction addParagraphs(source, entries, mainCssClass) {\n\t$.each(entries, function(index, entry) { \n\t\tif (entry.contentSnippet.length > 0) {\n\t\t\t$('<p><a target=\"_blank\" href=\"'+entry.link+'\" title=\"'+source+' - '+entry.title+'\">' + entry.contentSnippet + '</p><hr/>').appendTo(mainCssClass);\n\t\t}\n\t});\n}\n\nfunction escapeHTML(text) {\n    return $('<div/>').text(text).html()\n}\n \nfunction linkify_text(tweet) {\n    if (!(tweet.entities)) {\n        return escapeHTML(tweet.text)\n    }\n    \n    var index_map = {}\n    \n    $.each(tweet.entities.urls, function(i,entry) {\n        index_map[entry.indices[0]] = [entry.indices[1], function(text) {return \"<a href='\"+escapeHTML(entry.url)+\"'>\"+escapeHTML(text)+\"</a>\"}]\n    })\n    \n    $.each(tweet.entities.hashtags, function(i,entry) {\n        index_map[entry.indices[0]] = [entry.indices[1], function(text) {return \"<a href='http://twitter.com/search?q=\"+escape(\"#\"+entry.text)+\"'>\"+escapeHTML(text)+\"</a>\"}]\n    })\n    \n    $.each(tweet.entities.user_mentions, function(i,entry) {\n        index_map[entry.indices[0]] = [entry.indices[1], function(text) {return \"<a title='\"+escapeHTML(entry.name)+\"' href='http://twitter.com/\"+escapeHTML(entry.screen_name)+\"'>\"+escapeHTML(text)+\"</a>\"}]\n    })\n    \n    var result = \"\"\n    var last_i = 0\n    var i = 0\n    \n    for (i=0; i < tweet.text.length; ++i) {\n        var ind = index_map[i]\n        if (ind) {\n            var end = ind[0]\n            var func = ind[1]\n            if (i > last_i) {\n                result += escapeHTML(tweet.text.substring(last_i, i))\n            }\n            result += func(tweet.text.substring(i, end))\n            i = end - 1\n            last_i = end\n        }\n    }\n    \n    if (i > last_i) {\n        result += escapeHTML(tweet.text.substring(last_i, i))\n    }\n    \n    return result\n}"]],"start1":0,"start2":0,"length1":0,"length2":3144}]],"length":3144}
{"contributors":[],"silentsave":false,"ts":1356700154082,"patch":[[{"diffs":[[0,"$('<p><a"],[-1," target=\"_blank\""],[0," href=\"h"]],"start1":754,"start2":754,"length1":32,"length2":16},{"diffs":[[0,"p><a"],[-1," target=\"_blank\""],[0," hre"]],"start1":1465,"start2":1465,"length1":24,"length2":8}]],"length":3112,"saved":false}
{"ts":1356704985321,"patch":[[{"diffs":[[0,"dBlogs() {\n\t"],[1,"/*"],[0,"var urls = ["]],"start1":954,"start2":954,"length1":24,"length2":26},{"diffs":[[0,"gs');\n\t\t});\n\t});"],[1,"*/\n    $.getJSON(document.location.protocol + '//' + document.location.hostname + ':' + document.location.port + '/blogs/', \n    \tfunction(data) { \n\t\t\t$.each(data, function(index, value) { \n\t\t\t\t$('<p><a href=\"'+value.link+'\" title=\"'+value.title+'\">' + value.contentSnippet + '</p><hr/>').appendTo('.blogs');\n\t\t\t});\n\t\t}\n\t);"],[0,"\n}\nfunction addP"]],"start1":1301,"start2":1301,"length1":32,"length2":355}]],"length":3437,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356718519301,"patch":[[{"diffs":[[0,") {\n"],[-1,"\tvar urls = [\n\t'http://globoesporte.globo.com/servico/semantica/editorias/plantao/futebol/times/bahia/feed.rss'\n\t]\n"],[1,"    $.getJSON(document.location.protocol + '//' + document.location.hostname + ':' + document.location.port + '/n/', \n        function(data) { \n\t\t"],[0,"\t$.each("],[-1,"urls"],[1,"data"],[0,", fu"]],"start1":277,"start2":277,"length1":135,"length2":166},{"diffs":[[0,"ex, "],[-1,"url"],[1,"value"],[0,") { \n\t\t"],[1,"\t"],[-1,"parseRSS(url, function(data){\n\t\t\taddParagraphs(data.link, data.entries.slice(0,10), '.new"],[1,"\t$('<p><a href=\"'+value.link+'\" title=\"'+value.title+'\">' + value.contentSnippet + '</p><hr/>').appendTo('.blog"],[0,"s');\n\t\t"],[1,"\t"],[0,"});\n"],[1,"\t"],[0,"\t}"],[1,"\n\t"],[0,");\n}"]],"start1":453,"start2":453,"length1":120,"length2":149},{"diffs":[[0,"\t\t});\n\t\t}\n\t);\n}\n"],[1,""],[0,"function loadBlo"]],"start1":986,"start2":986,"length1":32,"length2":32},{"diffs":[[0,") {\n"],[-1,"\t/*var urls = [\n\t\t'http://www.bbmp.com.br/?feed=rss2', \n\t\t'http://globoesporte.globo.com/platb/ba-torcedor-bahia/feed/',\n\t\t'http://www.semprebahia.com/feed/atom/',\n\t\t'http://feeds.feedburner.com/bahiaco'\n\t];\n\t$.each(urls, function(index, url) { \n\t\tparseRSS(url, function(data){\n\t\t\taddParagraphs(data.link, data.entries.slice(0,2), '.blogs');\n\t\t});\n\t});*/\n"],[0,"    "]],"start1":1021,"start2":1021,"length1":363,"length2":8}]],"length":3142,"saved":false}
{"ts":1356718523286,"patch":[[{"diffs":[[0,"rt + '/n"],[1,"ews"],[0,"/', \n   "]],"start1":386,"start2":386,"length1":16,"length2":19},{"diffs":[[0,"/>').appendTo('."],[-1,"blog"],[1,"new"],[0,"s');\n\t\t\t});\n\t\t}\n"]],"start1":564,"start2":564,"length1":36,"length2":35}]],"length":3144,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356718740339,"patch":[[{"diffs":[[0,");\n}"],[-1,"\nfunction addParagraphs(source, entries, mainCssClass) {\n\t$.each(entries, function(index, entry) { \n\t\tif (entry.contentSnippet.length > 0) {\n\t\t\t$('<p><a href=\"'+entry.link+'\" title=\"'+source+' - '+entry.title+'\">' + entry.contentSnippet + '</p><hr/>').appendTo(mainCssClass);\n\t\t}\n\t});\n}"],[0,"\n\nfu"]],"start1":1345,"start2":1345,"length1":294,"length2":8}]],"length":2858,"saved":false}
