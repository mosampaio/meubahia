{"ts":1356692513317,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var conn = require('./conf').conn;\nvar http = require('http');\n\nvar options = {\n  host: 'search.twitter.com',\n  path: '/search.json?q=%23bbmp&page=1&rpp=8&include_entities=true&callback=?',\n  accep: 'application/json'\n};\n\nvar insertCallback = function(response) {\n  var str = '';\n\n  //another chunk of data has been recieved, so append it to `str`\n  response.on('data', function (chunk) {\n    str += chunk;\n  });\n\n  response.on('end', function () {\n    var data = JSON.parse(str);\n\tvar tweets = [];\n\tfor (var i in data.results) {\n\t\ttweets.push({\n\t\t\tfrom_user: data.results[i].from_user,\n\t\t\tfrom_user_name: data.results[i].from_user_name,\n\t\t\ttext: data.results[i].text,\n\t\t\tentities: data.results[i].entities\n\t\t});\n\t}\n\t\n\tconn.collection('tweets').insert(tweets,  function(err, result) {\n\t\tif (err) console.dir(err);\n\t});\n  });\n}\n\n//====== EXPORTS ======\nexports.recache = function(req, res) { \n\tconn.collection('tweets').find().toArray(function(err, items){\n\t\tif (err) { console.dir(err); }\n\t\tvar tweets = [];\n\t\tfor (var i in items) {\n\t\t\tvar json = items[i].session;\n\t\t\ttweets.push(items[i]._id);\n\t\t\tconn.collection('tweets').remove({_id: items[i]._id}, function(err, result) { if (err) console.dir(err);} );\n\t\t}\n\t\t\n\t\thttp.request(options, insertCallback).end();\n\t});\n\t\n\tres.send(200, 'OK');\n}\n\nexports.items = function(req, res) {\n\tconn.collection('tweets').find().toArray(function(err, items){\n\t\tres.send(items);\n\t});\n}"]],"start1":0,"start2":0,"length1":0,"length2":1419}]],"length":1419}
{"contributors":[],"silentsave":false,"ts":1356701414068,"patch":[[{"diffs":[[0,");\n\t"],[-1,"var tweets = [];\n\tfor (var i in data.results) {\n\t\ttweets.push({\n\t\t\tfrom_user: data.results[i].from_user,\n\t\t\tfrom_user_name: data.results[i].from_user_name,\n\t\t\ttext: data.results[i].text,\n\t\t\tentities: data.results[i].entities\n\t\t});\n\t}\n\t\n\tconn.collection('tweets').insert(tweets,  function(err, result) {\n\t\tif (err) console.dir(err);\n\t}"],[1,"console.dir(data"],[0,");\n "]],"start1":478,"start2":478,"length1":342,"length2":24}]],"length":1101,"saved":false}
{"ts":1356701454303,"patch":[[{"diffs":[[0," { \n"],[-1,"\tconn.collection('tweets').find().toArray(function(err, items){\n\t\tif (err) { console.dir(err); }\n\t\tvar tweets = [];\n\t\tfor (var i in items) {\n\t\t\tvar json = items[i].session;\n\t\t\ttweets.push(items[i]._id);\n\t\t\tconn.collection('tweets').remove({_id: items[i]._id}, function(err, result) { if (err) console.dir(err);} );\n\t\t}\n\t\t\n\t"],[0,"\thtt"]],"start1":570,"start2":570,"length1":331,"length2":8},{"diffs":[[0,"();\n"],[-1,"\t});\n\t\n"],[0,"\tres"]],"start1":616,"start2":616,"length1":15,"length2":8},{"diffs":[[0,");\n}"],[-1,"\n\nexports.items = function(req, res) {\n\tconn.collection('tweets').find().toArray(function(err, items){\n\t\tres.send(items);\n\t});\n}"]],"start1":639,"start2":639,"length1":132,"length2":4}]],"length":643,"saved":false}
{"ts":1356701458405,"patch":[[{"diffs":[[0,"();\n"],[-1,"\tres.send(200, 'OK');\n"],[0,"}"]],"start1":616,"start2":616,"length1":27,"length2":5}]],"length":621,"saved":false}
{"ts":1356701506212,"patch":[[{"diffs":[[0,");\n\t"],[-1,"console.dir(data);\n  });\n}\n\n//====== EXPORTS ======\nexports.recache = function(req, res) { \n\thttp.request(options, insertCallback).end("],[1,"var tweets = [];\n\tfor (var i in data.results) {\n\t\ttweets.push({\n\t\t\tfrom_user: data.results[i].from_user,\n\t\t\tfrom_user_name: data.results[i].from_user_name,\n\t\t\ttext: data.results[i].text,\n\t\t\tentities: data.results[i].entities\n\t\t});\n\t}\n\t\n\tconn.collection('tweets').insert(tweets,  function(err, result) {\n\t\tif (err) console.dir(err);\n\t});\n  });\n}\n\n//====== EXPORTS ======\nexports.recache = function(req, res) { \n\tconn.collection('tweets').find().toArray(function(err, items){\n\t\tif (err) { console.dir(err); }\n\t\tvar tweets = [];\n\t\tfor (var i in items) {\n\t\t\tvar json = items[i].session;\n\t\t\ttweets.push(items[i]._id);\n\t\t\tconn.collection('tweets').remove({_id: items[i]._id}, function(err, result) { if (err) console.dir(err);} );\n\t\t}\n\t\t\n\t\thttp.request(options, insertCallback).end();\n\t});\n\t\n\tres.send(200, 'OK');\n}\n\nexports.items = function(req, res) {\n\tconn.collection('tweets').find().toArray(function(err, items){\n\t\tres.send(items);\n\t}"],[0,");\n}"]],"start1":478,"start2":478,"length1":143,"length2":941}]],"length":1419,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356716513982,"patch":[[{"diffs":[[0,"onn;"],[-1,"\nvar http = require('http');\n\nvar options = {\n  host: 'search.twitter.com',\n  path: '/search.json?q=%23bbmp&page=1&rpp=8&include_entities=true&callback=?',\n  accep: 'application/json'\n};\n\nvar insertCallback = function(response) {\n  var str = '';\n\n  //another chunk of data has been recieved, so append it to `str`\n  response.on('data', function (chunk) {\n    str += chunk;\n  });\n\n  response.on('end', function () {\n    var data = JSON.parse(str);\n\tvar tweets = [];\n\tfor (var i in data.results) {\n\t\ttweets.push({\n\t\t\tfrom_user: data.results[i].from_user,\n\t\t\tfrom_user_name: data.results[i].from_user_name,\n\t\t\ttext: data.results[i].text,\n\t\t\tentities: data.results[i].entities\n\t\t});\n\t}\n\t\n\tconn.collection('tweets').insert(tweets,  function(err, result) {\n\t\tif (err) console.dir(err);\n\t});\n  });\n}\n\n//====== EXPORTS ======\nexports.recache = function(req, res) { \n\tconn.collection('tweets').find().toArray(function(err, items){\n\t\tif (err) { console.dir(err); }\n\t\tvar tweets = [];\n\t\tfor (var i in items) {\n\t\t\tvar json = items[i].session;\n\t\t\ttweets.push(items[i]._id);\n\t\t\tconn.collection('tweets').remove({_id: items[i]._id}, function(err, result) { if (err) console.dir(err);} );\n\t\t}\n\t\t\n\t\thttp.request(options, insertCallback).end();\n\t});\n\t\n\tres.send(200, 'OK');\n}"],[0,"\n\nex"]],"start1":30,"start2":30,"length1":1265,"length2":8}]],"length":162,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356716824037,"patch":[[{"diffs":[[0,"uire('./"],[1,"./"],[0,"conf').c"]],"start1":14,"start2":14,"length1":16,"length2":18}]],"length":164,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356716844168,"patch":[[{"diffs":[[0,"ire('./."],[1,"."],[0,"/conf')."]],"start1":15,"start2":15,"length1":16,"length2":17}]],"length":165,"saved":false}
